jobs:

- job: Linux
  pool:
    vmImage: ubuntu-20.04
  steps:
  - script: cd 2020 && ../ci/az-make.sh -j
    displayName: Build
  - script: cd 2020/c && ./all.sh
    displayName: Run (C)
    failOnStderr: true

- job: macOS
  pool:
    vmImage: macOS-10.15
  steps:
  - script: cd 2020 && ../ci/az-make.sh -j
    displayName: Build
  - script: cd 2020/c && ./all.sh
    displayName: Run (C)
    failOnStderr: true

- job: Windows_VC6
  pool:
    name: default
    demands: vc6
  steps:
  - script: cd 2020\c\vc6 & msdev aoc2020.dsw /make all /rebuild
    displayName: Build
  - script: cd 2020\c\vc6 & all.bat
    displayName: Run
